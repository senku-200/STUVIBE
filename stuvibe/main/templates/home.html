{% load static %}
{% load custom_filters %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePage</title>
    <link rel="stylesheet" href="../static/styles/leftbar.css?{% now 'U' %}">
    <link rel="stylesheet" href="../static/styles/home.css?{% now 'U' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <style>
        *{
            color: white;
        }
    </style>
</head>
<body>

    {% include 'leftbar.html' %}
    
    <main>
        <nav>
            <div class="leftsidebar_expander">
                <svg  class="leftsidebar_expander_svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 21" fill="none"><path d="M1 1H25M1 10.5H25M1 20H25" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="leftsidebar_collapser">
                <svg class="leftsidebar_collapser_svg" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M1.56322 0.266174L10 8.70318L18.4368 0.266174C18.7644 -0.0614248 19.2799 -0.0866233 19.6364 0.190576L19.7338 0.278023C20.0887 0.632922 20.0887 1.20833 19.7338 1.56323L11.2968 10L19.7338 18.4368C20.0614 18.7644 20.0866 19.2799 19.8094 19.6364L19.722 19.7338C19.3671 20.0887 18.7917 20.0887 18.4368 19.7338L10 11.2968L1.56322 19.7338C1.23562 20.0614 0.720135 20.0866 0.363631 19.8094L0.266175 19.722C-0.088724 19.3671 -0.088724 18.7917 0.266175 18.4368L8.70318 10L0.266175 1.56323C-0.0614235 1.23563 -0.0866256 0.720142 0.190573 0.363637L0.278045 0.266174C0.632944 -0.0887247 1.20832 -0.0887247 1.56322 0.266174ZM0.908762 0.920625L9.98841 10L0.908762 19.0794L0.920632 19.0912L10 10.0116L19.0794 19.0912L19.0912 19.0794L10.0116 10L19.0912 0.920625L19.0794 0.908776L10 9.9884L0.920632 0.908776L0.908762 0.920625Z" fill="white"/>
                  </svg>
            </div>
            <div class="stories">
                <div class="stories_conatiner">
                    <div class="dyanamic_stories">
                        <a href="{% url 'profile' user.id %}">
                            <div class="static_story_profile">
                                <img src="{{user.profile_photo.url}}">
                            </div>
                        </a>
                        {% for story in stories %}
                            <div class="story_profile">
                                <img src="{{story.host.profile_photo.url}}" alt="story profile">
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </nav>
        <div class="main_post_container">
            {% for post in posts %}
                <div class="post_container">
                    <div class="post_header">
                        <div class="post_header_container">
                            <div class="post_prf_con">
                                <a href="{% url 'profile' post.host.id %}">
                                <div class="user_profile_img">
                                    <img src="{{post.host.profile_photo.url}}" alt="profile photo">
                                </div></a>
                                <a href="{% url 'profile' post.host.id %}">
                                <div class="profile_name">
                                    <p>{{post.host}}</p>
                                </div></a>
                                <div class="until_date" style="width: auto;">
                                    <p style="white-space: nowrap;">{{post.updated|custom_time_since}}</p>
                                </div> 
                            </div>
                            <div class="post_menu" style="position: relative; right: 10px;top: -4px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="6" viewBox="0 0 21 6" fill="none">
                                    <path d="M2.43053 0C3.77288 0 4.86107 1.12703 4.86107 2.51728C4.86107 3.90752 3.77288 5.03455 2.43053 5.03455C1.08819 5.03455 0 3.90752 0 2.51728C0 1.12703 1.08819 0 2.43053 0Z" fill="#808080"/>
                                    <path d="M10.2089 0C11.5512 0 12.6394 1.12703 12.6394 2.51728C12.6394 3.90752 11.5512 5.03455 10.2089 5.03455C8.86652 5.03455 7.77832 3.90752 7.77832 2.51728C7.77832 1.12703 8.86652 0 10.2089 0Z" fill="#808080"/>
                                    <path d="M20.4167 2.51728C20.4167 1.12703 19.3285 0 17.9862 0C16.6439 0 15.5557 1.12703 15.5557 2.51728C15.5557 3.90752 16.6439 5.03455 17.9862 5.03455C19.3285 5.03455 20.4167 3.90752 20.4167 2.51728Z" fill="#808080"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="main_post">
                        <div class="post-container">                            
                            <div class="image-container">
                                {% for post_src in post.post_details.all %}
                                    {% if post_src.post.file.name|lower|endswith:'.jpg' or post_src.post.file.name|lower|endswith:'.jpeg' or post_src.post.file.name|lower|endswith:'.png' or post_src.post.file.name|lower|endswith:'.gif' or post_src.post.file.name|lower|endswith:'.jfif'%}
                                    <img src="{{post_src.post.url}}" alt="Post Image">
                                    {% elif post_src.post.file.name|lower|endswith:'.mp4' or post_src.post.file.name|lower|endswith:'.avi' %}
                                        <video controls width="300">
                                            <source src="{{ post_src.post.url }}" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    {% elif post.post.file.name|lower|endswith:'.mp3' %}
                                        <audio controls>
                                            <source src="{{ post_src.post.url }}" type="audio/mpeg">
                                            Your browser does not support the audio element.
                                        </audio>
                                    {% endif %}
                                {% endfor %}
                                <button class="prev-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="44" viewBox="0 0 26 44" fill="none">
                                        <path d="M24 2L4 22L24 42" stroke="white" stroke-width="5"/>
                                      </svg>
                                </button>
                                <button class="next-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="44" viewBox="0 0 26 44" fill="none">
                                        <path d="M2 42L22 22L2 2" stroke="white" stroke-width="5"/>
                                      </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="post_LCS">
                        <div class="preview_LCS_area">
                            <div class="preview_LCS_area_1">
                                <div class="preview_LCS">
                                    <form action="{% url 'home' %}" method="POST" class='like-form' id='{{post.id}}'>
                                        {% csrf_token %}
                                        <input type="hidden" name="like" value="{{ post.id }}">
                                        <button type="submit" class="preview_LCS_like">
                                            <div class="like-btn{{post.id}}" hidden>
                                                {% if user not in post.likes.all %}
                                                    Like
                                                {% else %}
                                                    Unlike
                                                {% endif %}
                                            </div>
                                            <div class="ui_button dynamic_likes{{post.id}}">
                                                {% if user not in post.likes.all %}
                                                    <svg 
                                                    |xmlns="http://www.w3.org/2000/svg" width="25" height="22" viewBox="0 0 25 22" fill="none">
                                                        <path d="M4.93831 8.33768C3.22727 8.33768 1.83301 9.72002 1.83301 11.4342V17.7236C1.83301 19.4377 3.22727 20.8201 4.93831 20.8201H5.99096C7.702 20.8201 9.09627 19.4377 9.09627 17.7236V11.4342C9.09627 9.72002 7.702 8.33768 5.99096 8.33768H4.93831Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                        <mask id="path-2-outside-1_35_1568" maskUnits="userSpaceOnUse" x="5.0957" y="0" width="20" height="22" fill="black">
                                                        <rect fill="white" x="5.0957" width="20" height="22"/>
                                                        <path d="M8.0957 11.4341C9.14835 11.4341 13.359 8.81354 13.359 3.57235C13.359 1.47588 16.5169 1.47588 16.5169 3.57235C16.5169 5.66883 16.5169 6.71706 15.4643 9.33765H21.7802C22.3615 9.33765 22.8328 9.80695 22.8328 10.3859V13.7818C22.8328 14.2952 22.6436 14.7908 22.301 15.1745L19.2503 18.5922C18.8509 19.0398 18.2781 19.2959 17.6768 19.2959H10.5519C10.3242 19.2959 10.1025 19.2223 9.92029 19.0863L8.0957 17.7235"/>
                                                        </mask>
                                                        <path d="M8.0957 9.43413C6.99113 9.43413 6.0957 10.3296 6.0957 11.4341C6.0957 12.5387 6.99113 13.4341 8.0957 13.4341V9.43413ZM15.4643 9.33765L13.6084 8.59218C13.3608 9.20848 13.4354 9.90747 13.8073 10.4577C14.1793 11.008 14.8001 11.3377 15.4643 11.3377V9.33765ZM22.301 15.1745L23.7931 16.5064L23.7931 16.5063L22.301 15.1745ZM19.2503 18.5922L17.7583 17.2604L17.7582 17.2605L19.2503 18.5922ZM9.92029 19.0863L8.72352 20.6887L8.72367 20.6888L9.92029 19.0863ZM9.29248 16.1211C8.40749 15.4602 7.15425 15.6418 6.49329 16.5268C5.83233 17.4118 6.01394 18.665 6.89893 19.326L9.29248 16.1211ZM8.0957 13.4341C8.57797 13.4341 9.02102 13.2998 9.33347 13.1813C9.68181 13.0491 10.0412 12.869 10.3956 12.6551C11.1054 12.2267 11.8823 11.6103 12.6059 10.8097C14.0651 9.1952 15.359 6.76776 15.359 3.57235H11.359C11.359 5.61813 10.5476 7.12158 9.63829 8.12765C9.17764 8.63733 8.70446 9.0037 8.32876 9.23044C8.1404 9.34412 7.99811 9.40968 7.9147 9.44132C7.7954 9.48658 7.8766 9.43413 8.0957 9.43413V13.4341ZM15.359 3.57235C15.359 3.56529 15.3593 3.61253 15.3257 3.68892C15.2921 3.76544 15.2398 3.83596 15.178 3.89068C15.0628 3.99267 14.9671 4 14.9379 4C14.9088 4 14.8131 3.99267 14.6979 3.89068C14.6361 3.83596 14.5838 3.76544 14.5501 3.68892C14.5166 3.61253 14.5169 3.56529 14.5169 3.57235H18.5169C18.5169 2.50258 18.0939 1.55475 17.3491 0.895501C16.6417 0.269385 15.7566 0 14.9379 0C14.1193 0 13.2341 0.269385 12.5268 0.895501C11.782 1.55475 11.359 2.50258 11.359 3.57235H15.359ZM14.5169 3.57235C14.5169 4.64817 14.5129 5.27902 14.4088 5.95309C14.3081 6.60452 14.1001 7.368 13.6084 8.59218L17.3201 10.0831C17.8811 8.68672 18.1994 7.61578 18.3619 6.56383C18.5209 5.53452 18.5169 4.59301 18.5169 3.57235H14.5169ZM15.4643 11.3377H21.7802V7.33765H15.4643V11.3377ZM21.7802 11.3377C21.2649 11.3377 20.8328 10.9194 20.8328 10.3859H24.8328C24.8328 8.69446 23.4582 7.33765 21.7802 7.33765V11.3377ZM20.8328 10.3859V13.7818H24.8328V10.3859H20.8328ZM20.8328 13.7818C20.8328 13.8028 20.8251 13.8246 20.8089 13.8428L23.7931 16.5063C24.462 15.757 24.8328 14.7876 24.8328 13.7818H20.8328ZM20.809 13.8427L17.7583 17.2604L20.7424 19.9241L23.7931 16.5064L20.809 13.8427ZM17.7582 17.2605C17.7393 17.2817 17.7099 17.2959 17.6768 17.2959V21.2959C18.8463 21.2959 19.9624 20.7979 20.7425 19.924L17.7582 17.2605ZM17.6768 17.2959H10.5519V21.2959H17.6768V17.2959ZM10.5519 17.2959C10.755 17.2959 10.9531 17.3614 11.1169 17.4837L8.72367 20.6888C9.25187 21.0832 9.89338 21.2959 10.5519 21.2959V17.2959ZM11.1171 17.4838L9.29248 16.1211L6.89893 19.326L8.72352 20.6887L11.1171 17.4838Z" fill="white" mask="url(#path-2-outside-1_35_1568)"/>
                                                    </svg>
                                                {% else %}
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 22 21" fill="none">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7163 2.91667C14.7163 1.16667 12.9873 0 11.6363 0C10.696 0 10.6225 0.714 10.4778 2.12333C10.4137 2.74167 10.3367 3.493 10.1663 4.375C9.71601 6.71067 8.15967 9.695 6.67101 10.5875V17.5C6.66634 20.125 7.54134 21 11.333 21H15.7348C18.2735 21 18.8883 19.3282 19.117 18.7087L19.1322 18.6667C19.2652 18.3097 19.5498 18.0285 19.8765 17.71C20.2382 17.353 20.6512 16.9482 20.958 16.3333C21.3208 15.6065 21.273 14.9602 21.2298 14.385C21.203 14.0362 21.1785 13.7142 21.2497 13.4167C21.3243 13.1017 21.42 12.8625 21.5122 12.6338C21.679 12.2185 21.833 11.8335 21.833 11.0833C21.833 9.33333 20.9603 8.169 19.1322 8.169H14.2497C14.2497 8.169 14.7163 4.66667 14.7163 2.91667ZM2.58301 9.33333C2.11888 9.33333 1.67376 9.51771 1.34557 9.8459C1.01738 10.1741 0.833008 10.6192 0.833008 11.0833V19.25C0.833008 19.7141 1.01738 20.1592 1.34557 20.4874C1.67376 20.8156 2.11888 21 2.58301 21C3.04714 21 3.49226 20.8156 3.82044 20.4874C4.14863 20.1592 4.33301 19.7141 4.33301 19.25V11.0833C4.33301 10.6192 4.14863 10.1741 3.82044 9.8459C3.49226 9.51771 3.04714 9.33333 2.58301 9.33333Z" fill="white"/>
                                                    </svg>
                                                {% endif %}
                                            </div>
                                        </button>
                                    </form>
                                    <div class="preview_LCS_comment">
                                        <a href="{% url 'comments' post.id %}">
                                        <button class="cmt_btn">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="21" viewBox="0 0 22 21" fill="none">
                                                <path d="M10.5032 17.6894C11.7325 17.6894 12.9162 17.4932 14.0249 17.1302C15.7503 18.441 17.8343 19.3631 20.1035 19.7309L20.1035 19.731L20.1112 19.732L20.18 19.741C20.2276 19.7504 20.2755 19.7543 20.3199 19.7551V19.7551H20.3246C20.7433 19.7551 21.083 19.4154 21.083 18.9967C21.083 18.7893 20.9997 18.602 20.866 18.4653L20.6892 18.2845L20.6851 18.2887C19.5994 17.1903 18.8091 15.8054 18.4382 14.2579C19.6349 12.923 20.3743 11.1621 20.4044 9.22937H20.4044V9.22548V9.21938C20.4044 4.51222 15.9189 0.75 10.4937 0.75C5.06845 0.75 0.583008 4.51222 0.583008 9.21938C0.583008 13.9265 5.06842 17.6894 10.4937 17.6894H10.4937H10.4937H10.4937H10.4938H10.4938H10.4938H10.4938H10.4938H10.4938H10.4939H10.4939H10.4939H10.4939H10.4939H10.4939H10.494H10.494H10.494H10.494H10.494H10.494H10.4941H10.4941H10.4941H10.4941H10.4941H10.4941H10.4941H10.4942H10.4942H10.4942H10.4942H10.4942H10.4942H10.4943H10.4943H10.4943H10.4943H10.4943H10.4943H10.4944H10.4944H10.4944H10.4944H10.4944H10.4944H10.4945H10.4945H10.4945H10.4945H10.4945H10.4945H10.4946H10.4946H10.4946H10.4946H10.4946H10.4946H10.4947H10.4947H10.4947H10.4947H10.4947H10.4947H10.4948H10.4948H10.4948H10.4948H10.4948H10.4948H10.4949H10.4949H10.4949H10.4949H10.4949H10.4949H10.495H10.495H10.495H10.495H10.495H10.495H10.4951H10.4951H10.4951H10.4951H10.4951H10.4952H10.4952H10.4952H10.4952H10.4952H10.4952H10.4953H10.4953H10.4953H10.4953H10.4953H10.4953H10.4954H10.4954H10.4954H10.4954H10.4954H10.4954H10.4955H10.4955H10.4955H10.4955H10.4955H10.4955H10.4956H10.4956H10.4956H10.4956H10.4956H10.4957H10.4957H10.4957H10.4957H10.4957H10.4957H10.4958H10.4958H10.4958H10.4958H10.4958H10.4958H10.4959H10.4959H10.4959H10.4959H10.4959H10.496H10.496H10.496H10.496H10.496H10.496H10.4961H10.4961H10.4961H10.4961H10.4961H10.4961H10.4962H10.4962H10.4962H10.4962H10.4962H10.4963H10.4963H10.4963H10.4963H10.4963H10.4963H10.4964H10.4964H10.4964H10.4964H10.4964H10.4965H10.4965H10.4965H10.4965H10.4965H10.4965H10.4966H10.4966H10.4966H10.4966H10.4966H10.4967H10.4967H10.4967H10.4967H10.4967H10.4967H10.4968H10.4968H10.4968H10.4968H10.4968H10.4969H10.4969H10.4969H10.4969H10.4969H10.4969H10.497H10.497H10.497H10.497H10.497H10.4971H10.4971H10.4971H10.4971H10.4971H10.4971H10.4972H10.4972H10.4972H10.4972H10.4972H10.4973H10.4973H10.4973H10.4973H10.4973H10.4973H10.4974H10.4974H10.4974H10.4974H10.4974H10.4975H10.4975H10.4975H10.4975H10.4975H10.4976H10.4976H10.4976H10.4976H10.4976H10.4976H10.4977H10.4977H10.4977H10.4977H10.4977H10.4978H10.4978H10.4978H10.4978H10.4978H10.4979H10.4979H10.4979H10.4979H10.4979H10.4979H10.498H10.498H10.498H10.498H10.498H10.4981H10.4981H10.4981H10.4981H10.4981H10.4982H10.4982H10.4982H10.4982H10.4982H10.4982H10.4983H10.4983H10.4983H10.4983H10.4983H10.4984H10.4984H10.4984H10.4984H10.4984H10.4985H10.4985H10.4985H10.4985H10.4985H10.4985H10.4986H10.4986H10.4986H10.4986H10.4986H10.4987H10.4987H10.4987H10.4987H10.4987H10.4988H10.4988H10.4988H10.4988H10.4988H10.4989H10.4989H10.4989H10.4989H10.4989H10.4989H10.499H10.499H10.499H10.499H10.499H10.4991H10.4991H10.4991H10.4991H10.4991H10.4992H10.4992H10.4992H10.4992H10.4992H10.4993H10.4993H10.4993H10.4993H10.4993H10.4994H10.4994H10.4994H10.4994H10.4994H10.4994H10.4995H10.4995H10.4995H10.4995H10.4995H10.4996H10.4996H10.4996H10.4996H10.4996H10.4997H10.4997H10.4997H10.4997H10.4997H10.4998H10.4998H10.4998H10.4998H10.4998H10.4999H10.4999H10.4999H10.4999H10.4999H10.5H10.5H10.5H10.5H10.5H10.5001H10.5001H10.5001H10.5001H10.5001H10.5001H10.5002H10.5002H10.5002H10.5002H10.5002H10.5003H10.5003H10.5003H10.5003H10.5003H10.5004H10.5004H10.5004H10.5004H10.5004H10.5005H10.5005H10.5005H10.5005H10.5005H10.5006H10.5006H10.5006H10.5006H10.5006H10.5007H10.5007H10.5007H10.5007H10.5007H10.5008H10.5008H10.5008H10.5008H10.5008H10.5009H10.5009H10.5009H10.5009H10.5009H10.501H10.501H10.501H10.501H10.501H10.501H10.5011H10.5011H10.5011H10.5011H10.5011H10.5012H10.5012H10.5012H10.5012H10.5012H10.5013H10.5013H10.5013H10.5013H10.5013H10.5014H10.5014H10.5014H10.5014H10.5014H10.5015H10.5015H10.5015H10.5015H10.5015H10.5016H10.5016H10.5016H10.5016H10.5016H10.5017H10.5017H10.5017H10.5017H10.5017H10.5018H10.5018H10.5018H10.5018H10.5018H10.5019H10.5019H10.5019H10.5019H10.5019H10.502H10.502H10.502H10.502H10.502H10.5021H10.5021H10.5021H10.5021H10.5021H10.5022H10.5022H10.5022H10.5022H10.5022H10.5023H10.5023H10.5023H10.5023H10.5023H10.5024H10.5024H10.5024H10.5024H10.5024H10.5025H10.5025H10.5025H10.5025H10.5025H10.5026H10.5026H10.5026H10.5026H10.5026H10.5027H10.5027H10.5027H10.5027H10.5027H10.5028H10.5028H10.5028H10.5028H10.5028H10.5029H10.5029H10.5029H10.5029H10.5029H10.5029H10.503H10.503H10.503H10.503H10.503H10.5031H10.5031H10.5031H10.5031H10.5031H10.5032H10.5032ZM14.6113 15.6822C14.4865 15.5888 14.3305 15.5332 14.1627 15.5332C14.1331 15.5332 14.1086 15.5375 14.0964 15.54C14.0346 15.5425 13.9732 15.5523 13.9136 15.5703L13.9425 15.6856L13.9006 15.5752C12.9019 15.9534 11.7435 16.1732 10.5323 16.1732H10.5323H10.5322H10.5321H10.532H10.5319H10.5319H10.5318H10.5317H10.5316H10.5315H10.5315H10.5314H10.5313H10.5312H10.5311H10.5311H10.531H10.5309H10.5308H10.5308H10.5307H10.5306H10.5305H10.5304H10.5304H10.5303H10.5302H10.5301H10.53H10.53H10.5299H10.5298H10.5297H10.5296H10.5296H10.5295H10.5294H10.5293H10.5292H10.5292H10.5291H10.529H10.5289H10.5288H10.5288H10.5287H10.5286H10.5285H10.5284H10.5284H10.5283H10.5282H10.5281H10.528H10.528H10.5279H10.5278H10.5277H10.5277H10.5276H10.5275H10.5274H10.5273H10.5273H10.5272H10.5271H10.527H10.5269H10.5269H10.5268H10.5267H10.5266H10.5265H10.5265H10.5264H10.5263H10.5262H10.5261H10.5261H10.526H10.5259H10.5258H10.5257H10.5257H10.5256H10.5255H10.5254H10.5253H10.5253H10.5252H10.5251H10.525H10.525H10.5249H10.5248H10.5247H10.5246H10.5246H10.5245H10.5244H10.5243H10.5242H10.5242H10.5241H10.524H10.5239H10.5238H10.5238H10.5237H10.5236H10.5235H10.5234H10.5234H10.5233H10.5232H10.5231H10.523H10.523H10.5229H10.5228H10.5227H10.5226H10.5226H10.5225H10.5224H10.5223H10.5223H10.5222H10.5221H10.522H10.5219H10.5219H10.5218H10.5217H10.5216H10.5215H10.5215H10.5214H10.5213H10.5212H10.5211H10.5211H10.521H10.5209H10.5208H10.5207H10.5207H10.5206H10.5205H10.5204H10.5203H10.5203H10.5202H10.5201H10.52H10.5199H10.5199H10.5198H10.5197H10.5196H10.5195H10.5195H10.5194H10.5193H10.5192H10.5192H10.5191H10.519H10.5189H10.5188H10.5188H10.5187H10.5186H10.5185H10.5184H10.5184H10.5183H10.5182H10.5181H10.518H10.518H10.5179H10.5178H10.5177H10.5176H10.5176H10.5175H10.5174H10.5173H10.5172H10.5172H10.5171H10.517H10.5169H10.5168H10.5168H10.5167H10.5166H10.5165H10.5165H10.5164H10.5163H10.5162H10.5161H10.5161H10.516H10.5159H10.5158H10.5157H10.5157H10.5156H10.5155H10.5154H10.5153H10.5153H10.5152H10.5151H10.515H10.5149H10.5149H10.5148H10.5147H10.5146H10.5145H10.5145H10.5144H10.5143H10.5142H10.5141H10.5141H10.514H10.5139H10.5138H10.5137H10.5137H10.5136H10.5135H10.5134H10.5134H10.5133H10.5132H10.5131H10.513H10.513H10.5129H10.5128H10.5127H10.5126H10.5126H10.5125H10.5124H10.5123H10.5122H10.5122H10.5121H10.512H10.5119H10.5118H10.5118H10.5117H10.5116H10.5115H10.5114H10.5114H10.5113H10.5112H10.5111H10.511H10.511H10.5109H10.5108H10.5107H10.5107H10.5106H10.5105H10.5104H10.5103H10.5103H10.5102H10.5101H10.51H10.5099H10.5099H10.5098H10.5097H10.5096H10.5095H10.5095H10.5094H10.5093H10.5092H10.5091H10.5091H10.509H10.5089H10.5088H10.5087H10.5087H10.5086H10.5085H10.5084H10.5083H10.5083H10.5082H10.5081H10.508H10.5079H10.5079H10.5078H10.5077H10.5076H10.5076H10.5075H10.5074H10.5073H10.5072H10.5072H10.5071H10.507H10.5069H10.5068H10.5068H10.5067H10.5066H10.5065H10.5064H10.5064H10.5063H10.5062H10.5061H10.506H10.506H10.5059H10.5058H10.5057H10.5056H10.5056H10.5055H10.5054H10.5053H10.5052H10.5052H10.5051H10.505H10.5049H10.5049H10.5048H10.5047H10.5046H10.5045H10.5045H10.5044H10.5043H10.5042H10.5041H10.5041H10.504H10.5039H10.5038H10.5037H10.5037H10.5036H10.5035H10.5034H10.5033H10.5033H10.5032H10.5031H10.503H10.5029H10.5029H10.5028H10.5027H10.5026H10.5025H10.5025H10.5024H10.5023H10.5022H10.5022H10.5021H10.502H10.5019H10.5018H10.5018H10.5017H10.5016H10.5015H10.5014H10.5014H10.5013H10.5012H10.5011H10.501H10.501H10.5009H10.5008H10.5007H10.5006H10.5006H10.5005H10.5004H10.5003H10.5002H10.5002H10.5001H10.5H10.4999H10.4998H10.4998H10.4997H10.4996H10.4995H10.4994H10.4994H10.4993H10.4992H10.4991H10.4991H10.499H10.4989H10.4988H10.4987H10.4987H10.4986H10.4985H10.4984H10.4983H10.4983H10.4982H10.4981H10.498H10.4979H10.4979H10.4978H10.4977H10.4976H10.4975H10.4975H10.4974H10.4973H10.4972H10.4971H10.4971H10.497H10.4969H10.4968H10.4967H10.4967H10.4966H10.4965H10.4964H10.4964H10.4963H10.4962H10.4961H10.496H10.496H10.4959H10.4958H10.4957H10.4956H10.4956H10.4955H10.4954H10.4953H10.4952H10.4952H10.4951H10.495H10.4949H10.4948H10.4948H10.4947H10.4946H10.4945H10.4944H10.4944H10.4943H10.4942H10.4941H10.494H10.494H10.4939H10.4938H10.4937H10.4937C5.8212 16.1732 2.09992 13.0133 2.09992 9.22006C2.09992 5.42684 5.82117 2.26759 10.4937 2.26759C15.1664 2.26759 18.8868 5.4269 18.8875 9.21898C18.8715 10.9081 18.1792 12.4326 17.069 13.5376L17.0312 13.5753L17.0199 13.6044C16.9263 13.7246 16.8688 13.8755 16.8647 14.0391C16.8639 14.0511 16.8631 14.0675 16.8631 14.0843V14.0843V14.0844V14.0844V14.0844V14.0844V14.0845V14.0845V14.0845V14.0846V14.0846V14.0846V14.0846V14.0847V14.0847V14.0847V14.0847V14.0848V14.0848V14.0848V14.0849V14.0849V14.0849V14.0849V14.085V14.085V14.085V14.0851V14.0851V14.0851V14.0851V14.0852V14.0852V14.0852V14.0852V14.0853V14.0853V14.0853V14.0854V14.0854V14.0854V14.0854V14.0855V14.0855V14.0855V14.0856V14.0856V14.0856V14.0856V14.0857V14.0857V14.0857V14.0857V14.0858V14.0858V14.0858V14.0859V14.0859V14.0859V14.0859V14.086V14.086V14.086V14.0861V14.0861V14.0861V14.0861V14.0862V14.0862V14.0862V14.0863V14.0863V14.0863V14.0863V14.0864V14.0864V14.0864V14.0864V14.0865V14.0865V14.0865V14.0866V14.0866V14.0866V14.0866V14.0867V14.0867V14.0867V14.0868V14.0868V14.0868V14.0868V14.0869V14.0869V14.0869V14.0869V14.087V14.087V14.087V14.0871V14.0871V14.0871V14.0871V14.0872V14.0872V14.0872V14.0873V14.0873V14.0873V14.0873V14.0874V14.0874V14.0874V14.0875V14.0875V14.0875V14.0875V14.0876V14.0876V14.0876V14.0876V14.0877V14.0877V14.0877V14.0878V14.0878V14.0878V14.0878V14.0879V14.0879V14.0879V14.088V14.088V14.088V14.088V14.0881V14.0881V14.0881V14.0882V14.0882V14.0882V14.0882V14.0883V14.0883V14.0883V14.0884C16.8617 14.1083 16.8618 14.1261 16.8618 14.1353L16.8618 14.1379V14.1379V14.1379V14.138V14.138V14.138V14.1381V14.1381V14.1381V14.1381V14.1382V14.1382V14.1382V14.1383V14.1383V14.1383V14.1384V14.1384V14.1384V14.1385V14.1385V14.1385V14.1386V14.1386V14.1386V14.1387V14.1387V14.1387V14.1388V14.1388V14.1388V14.1388V14.1389V14.1389V14.1389V14.139V14.139V14.139V14.1391V14.1391V14.1391V14.1392V14.1392V14.1392V14.1393V14.1393V14.1393V14.1394V14.1394V14.1394V14.1394V14.1395V14.1395V14.1395V14.1396V14.1396V14.1396V14.1397V14.1397V14.1397V14.1398V14.1398V14.1398V14.1399V14.1399V14.1399V14.14V14.14V14.14V14.1401V14.1401V14.1401V14.1401V14.1402V14.1402V14.1402V14.1403V14.1403V14.1403V14.1404V14.1404V14.1404V14.1405V14.1405V14.1405V14.1406V14.1406V14.1406V14.1407V14.1407V14.1407V14.1408V14.1408V14.1408V14.1408V14.1409V14.1409V14.1409V14.141V14.141V14.141V14.1411V14.1411V14.1411V14.1412V14.1412V14.1412V14.1413V14.1413V14.1413V14.1414V14.1414V14.1414V14.1415V14.1415V14.1415V14.1415V14.1416V14.1416V14.1416V14.1417V14.1417V14.1417V14.1418V14.1418V14.1418V14.1419V14.1419V14.1419V14.142V14.142V14.142V14.1421V14.1421V14.1421V14.1421V14.1422V14.1422V14.1422V14.1423V14.1423V14.1423V14.1424V14.1424V14.1424V14.1425V14.1425V14.1425V14.1426V14.1426V14.1426V14.1427V14.1427V14.1427V14.1428V14.1428V14.1428V14.1428V14.1429V14.1429V14.1429V14.143V14.143V14.143V14.1431V14.1431V14.1431V14.1432V14.1432V14.1432V14.1433V14.1433V14.1433V14.1434V14.1434V14.1434V14.1435V14.1435V14.1435V14.1435V14.1436V14.1436V14.1436V14.1437V14.1437V14.1437V14.1438V14.1438V14.1438V14.1439V14.1439V14.1439V14.144V14.144V14.144V14.1441V14.1441V14.1441V14.1442V14.1442V14.1442V14.1442V14.1443V14.1443V14.1443V14.1444V14.1444V14.1444V14.1445V14.1445V14.1445V14.1446V14.1446V14.1446V14.1447V14.1447V14.1447V14.1448V14.1448V14.1448V14.1449V14.1449V14.1449V14.1449V14.145V14.145V14.145V14.1451V14.1451V14.1451V14.1452V14.1452V14.1452V14.1453V14.1453V14.1453V14.1454V14.1454V14.1454V14.1455V14.1455V14.1455V14.1456V14.1456V14.1456V14.1456V14.1457V14.1457V14.1457V14.1458V14.1458V14.1458V14.1459V14.1459V14.1459V14.146V14.146V14.146V14.1461V14.1461V14.1461V14.1462V14.1462V14.1462V14.1462V14.1463V14.1463V14.1463V14.1464V14.1464V14.1464V14.1465V14.1465V14.1465V14.1466V14.1466V14.1466V14.1467V14.1467V14.1467V14.1468V14.1468V14.1468V14.1469V14.1469V14.1469V14.1469V14.147V14.147V14.147V14.1471V14.1471V14.1471V14.1472V14.1472V14.1472V14.1473V14.1473V14.1473V14.1474V14.1474V14.1474V14.1475V14.1475V14.1475V14.1476V14.1476V14.1476V14.1476V14.1477V14.1477V14.1477V14.1478V14.1478V14.1478V14.1479V14.1479V14.1479V14.148V14.148V14.148V14.1481V14.1481V14.1481V14.1482V14.1482V14.1482V14.1483V14.1483V14.1483V14.1483V14.1484V14.1484V14.1484V14.1485V14.1485V14.1485V14.1486V14.1486V14.1486V14.1487V14.1487V14.1487V14.1488V14.1488V14.1488V14.1489V14.1489V14.1489V14.149V14.149V14.149V14.149V14.1491V14.1491V14.1491V14.1492V14.1492V14.1492V14.1493V14.1493V14.1493V14.1494V14.1494V14.1494V14.1495V14.1495V14.1495V14.1496V14.1496V14.1496V14.1496V14.1497V14.1497V14.1497V14.1498V14.1498V14.1498V14.1499V14.1499V14.1499V14.15V14.15V14.15V14.1501V14.1501V14.1501V14.1502V14.1502V14.1502V14.1503V14.1503V14.1503V14.1503V14.1504V14.1504V14.1504V14.1505V14.1505V14.1505V14.1506V14.1506V14.1506V14.1507V14.1507V14.1507V14.1508V14.1508V14.1508V14.1509V14.1509V14.1509V14.151V14.151V14.151V14.151V14.1511V14.1511V14.1511V14.1512V14.1512V14.1512V14.1513V14.1513V14.1513V14.1514V14.1514V14.1514V14.1515V14.1515V14.1515V14.1516V14.1516V14.1516V14.1517V14.1517V14.1517V14.1517V14.1518V14.1518V14.1518V14.1519V14.1519V14.1519V14.152V14.152V14.152V14.1521V14.1521V14.1521V14.1522V14.1522V14.1522V14.1523V14.1523V14.1523V14.1524V14.1524V14.1524V14.1524V14.1525V14.1525V14.1525V14.1526V14.1526V14.1526V14.1527V14.1527V14.1527V14.1528V14.1528V14.1528V14.1529V14.1529V14.1529V14.153V14.153V14.153V14.153V14.1531V14.1531V14.1531V14.1532V14.1532V14.1532V14.1533V14.1533V14.1533V14.1534V14.1534V14.1534V14.1535V14.1535V14.1535V14.1536V14.1536V14.1536V14.1537V14.1537V14.1537V14.1537V14.1538V14.1538V14.1538V14.1539V14.1539V14.1539V14.154V14.154V14.154V14.1541V14.1541V14.1541V14.177L16.8659 14.1996L14.6113 15.6822ZM14.5118 15.9113L14.5119 15.9114L14.5118 15.9113Z" fill="white" stroke="white" stroke-width="0.5"/>
                                            </svg>
                                        </button></a>
                                    </div>
                                    <div class="preview_LCS_share">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                                            <path d="M16.0376 4.80596C7.60947 5.12721 3.21242 12.9637 1.85509 17.4743C1.75541 17.8055 2.00609 18.129 2.348 18.129C2.55532 18.129 2.74344 18.0021 2.83172 17.812C5.9959 11.0019 13.1242 9.80387 16.1268 10.0733C16.3881 10.0968 16.5753 10.3243 16.5753 10.59V12.8475C16.5753 13.3263 17.1437 13.5696 17.4828 13.236L21.6709 9.11401C21.8577 8.93017 21.8866 8.63669 21.7392 8.41916L17.551 2.23623C17.2538 1.79739 16.5753 2.01047 16.5753 2.54268V4.2541C16.5753 4.55325 16.3327 4.7947 16.0376 4.80596Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                          </svg>
                                    </div>
                                </div>
                                <div class="preview_LCS_save">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                                        <path d="M1.29102 20.9235V2.21016C1.29102 1.5506 1.90397 1.0159 2.66006 1.0159H19.0886C19.8448 1.0159 20.4577 1.5506 20.4577 2.21016V20.9235C20.4577 21.4748 19.6742 21.7316 19.258 21.3166L10.8743 12.9585L2.4907 21.3166C2.07448 21.7316 1.29102 21.4748 1.29102 20.9235Z" stroke="white" stroke-width="2" stroke-linejoin="round"/>
                                      </svg>
                                </div>
                            </div>
                            <div class="preview_LCS_area_con2">
                                <div class="preview_LCS_area_2">
                                    <p class="preview_likes_count like-count{{post.id}}" >{{post.likes.count}}</p>
                                    <p class="preview_like_txt">likes</p>
                                </div>
                                <div class="preview_LCS_area_3">
                                    <p class="preview_dynamic_title">{{post.title}}</p>
                                    <div class="preview_dynamic_expander">
                                        <p >more...</p>
                                    </div>
                                    <div class="preview_dynamic_expand">
                                        <p class="preview_dynamic_discription">{{post.content}}</p>
                                        <p class="preview_dynamic_tag">{{post.tags}}</p>
                                        
                                    </div>
                                    <div class="preview_dynamic_collapse">
                                        <p>less...</p>
                                    </div>
                                </div>
                                <div class="preview_LCS_area_4">
                                    <a href="{% url 'comments' post.id %}">View all comments</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

    


    </main>
    
</body>
<script>
    let expander = document.querySelector('.leftsidebar_expander_svg')
    let collapser = document.querySelector('.leftsidebar_collapser_svg')
    let collapser_con = document.querySelector('.leftsidebar_collapser')
    let leftsidebar = document.querySelector('.leftsidebar')
    expander.addEventListener('click',()=>{
        leftsidebar.classList.add('activate');
        collapser_con.classList.add('activate');
    })
    collapser.addEventListener('click',()=>{
        leftsidebar.classList.remove('activate');
        collapser_con.classList.remove('activate');

    })
</script>
<script>
    var expander_discription = document.querySelectorAll('.preview_dynamic_expander')
    var collapse_discription = document.querySelectorAll('.preview_dynamic_collapse')
    expander_discription.forEach(button => {
        button.addEventListener('click',()=>{
            button.classList.toggle('activate')
            const expand_discription =  button.parentNode.querySelector('.preview_dynamic_expand')
            const collapse_discription =  button.parentNode.querySelector('.preview_dynamic_collapse')
            expand_discription.classList.toggle('activate')
            collapse_discription.classList.toggle('activate')
        })
    })
    collapse_discription.forEach(button => {
        button.addEventListener('click',()=>{
            button.classList.toggle('activate')
            const expand_discription =  button.parentNode.querySelector('.preview_dynamic_expand')
            const expander =  button.parentNode.querySelector('.preview_dynamic_expander')
            expand_discription.classList.toggle('activate')
            expander.classList.toggle('activate')
        })
    })
    
    $('.like-form').submit(function(e){
                e.preventDefault()
                
                const post_id = $(this).attr('id')
                
                const likeText = $(`.like-btn${post_id}`).text()

                const trim = $.trim(likeText)

                const url = $(this).attr('action')
                
                let res;
                const likes = $(`.like-count${post_id}`).text()
                const trimCount = parseInt(likes)
                
                $.ajax({
                    type: 'POST',
                    url: url,
                    data: {
                        'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                        'post_id':post_id,
                    },
                    success: function(response) {
                        if(trim === 'Unlike') {
                            $(`.like-btn${post_id}`).text('Like')
                            res = trimCount - 1
                        } else {
                            $(`.like-btn${post_id}`).text('Unlike')
                            res = trimCount + 1
                        }

                        $(`.like-count${post_id}`).text(res)
                        console.log(window.location.href)
                        $(`.dynamic_likes${post_id}`).load(window.location.href +` .dynamic_likes${post_id}`)
                    },
                    error: function(response) {
                        console.log('error', response)
                    }
                })

            })
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    
    $(".post-container").each(function() {
        var imageContainer = $(this).find(".image-container");
        var images = $(this).find('img, video, audio');
        var currentIndex = 0;

        function updateImage() {
            images.hide();
            images.eq(currentIndex).show();
        }

        updateImage();

        $(this).find(".prev-button").click(function() {
            if (currentIndex > 0) {
                currentIndex--;
                updateImage();
            }
        });

        $(this).find(".next-button").click(function() {
            if (currentIndex < images.length - 1) {
                currentIndex++;
                updateImage();
            }
        });
    });
});
</script>

</html>

